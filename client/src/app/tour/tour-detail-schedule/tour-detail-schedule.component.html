<div class="schedules">
  <div class="flex justify-between items-center">
    <h2 class="page-subtitle">Lịch khởi hành & giá tour</h2>
    <div>
      <mat-form-field class="example-full-width">
        <mat-label><span class="fz-14">Ngày khởi hành</span> </mat-label>
        <input
          [min]="minDate"
          matInput
          [matDatepicker]="picker"
          [(ngModel)]="selectedDate"
          (dateChange)="onDateChange($event)"
        />
        <mat-datepicker-toggle
          matIconSuffix
          [for]="picker"
        ></mat-datepicker-toggle>
        <mat-datepicker [dateClass]="dateClass" #picker></mat-datepicker>
      </mat-form-field>
    </div>
  </div>
  <div style="overflow: auto; height: 500px; width: 100%">
    <div class="example-container mat-elevation-z8">
      <table
        mat-table
        [dataSource]="schedules"
        matSort
        matSortActive="departureDate"
        matSortDisableClear
        matSortDirection="asc"
        class="mat-elevation-z8 demo-table"
      >
        <!-- Position Column -->
        <ng-container matColumnDef="departureDate">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            Ngày khởi hành
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.departureDate | date : "EEEEE, dd/MM/YYYY" }}
          </td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="returnDate">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Ngày về</th>
          <td mat-cell *matCellDef="let element">
            {{ element.returnDate | date : "EEEEE, dd/MM/YYYY" }}
          </td>
        </ng-container>

        <!-- Weight Column -->
        <ng-container matColumnDef="remainingSpot">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            Tình trạng chỗ
          </th>
          <td mat-cell *matCellDef="let element">
            {{
              element.remainingSpot == 0
                ? "Hết chỗ"
                : element.remainingSpot < 8
                ? "Liên hệ"
                : "Còn " + element.remainingSpot + " chỗ"
            }}
          </td>
        </ng-container>

        <!-- Symbol Column -->
        <ng-container matColumnDef="priceAdult">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Giá</th>
          <td mat-cell *matCellDef="let element">
            <span
              [class.green-color]="element.priceAdult < tourPrice"
              [class.red-color]="element.priceAdult > tourPrice"
            >
              {{ element.priceAdult | currency : "VND" : "symbol" : "1.0-0" }}
            </span>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumns"
          (click)="OnRowClicked(row)"
          [class.row-is-clicked]="clickedRows.has(row)"
        ></tr>
      </table>

      <mat-paginator
        [length]="resultsLength"
        [pageSize]="10"
        aria-label="Select page of GitHub search results"
      ></mat-paginator>
    </div>
  </div>
</div>
